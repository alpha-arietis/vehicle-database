{"ast":null,"code":"import _classCallCheck from\"/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Link}from'react-router-dom';import axios from'axios';var Vehicle=function Vehicle(props){return React.createElement(\"tr\",null,React.createElement(\"td\",null,props.vehicle.make),React.createElement(\"td\",null,props.vehicle.model),React.createElement(\"td\",null,props.vehicle.year),React.createElement(\"td\",null,props.vehicle.numberPlate),React.createElement(\"td\",null,props.vehicle.staff),React.createElement(\"td\",null,props.vehicle.ownedOrLeased),React.createElement(\"td\",null,props.vehicle.ownedOrLeased==='Leased'?props.vehicle.leaseExp.substring(0,10).split('-').reverse().join('/'):'NA'),React.createElement(\"td\",null,\"$\",props.vehicle.cost),React.createElement(\"td\",{className:props.checkRegoDate(props.vehicle.regoDue)},props.vehicle.regoDue.substring(0,10).split('-').reverse().join('/')),React.createElement(\"td\",{className:props.checkWarrantDate(props.vehicle.warrantDue)},props.vehicle.warrantDue.substring(0,10).split('-').reverse().join('/')),React.createElement(\"td\",null,props.vehicle.odometer),React.createElement(\"td\",null,props.vehicle.odometerDate.substring(0,10).split('-').reverse().join('/')),React.createElement(\"td\",null,React.createElement(Link,{to:'/edit/'+props.vehicle._id},\"edit\"),\" | \",React.createElement(\"a\",{href:\"#\",className:\"text-danger\",onClick:function onClick(){props.deleteVehicle(props.vehicle._id);}},\"delete\")));};var VehicleList=/*#__PURE__*/function(_React$Component){_inherits(VehicleList,_React$Component);function VehicleList(){var _getPrototypeOf2;var _this;_classCallCheck(this,VehicleList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VehicleList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={vehicles:[]};_this.vehicleList=function(){return _this.state.vehicles.map(function(currentvehicle){return React.createElement(Vehicle,{vehicle:currentvehicle,deleteVehicle:_this.deleteVehicle,key:currentvehicle._id,checkRegoDate:_this.checkRegoDate,checkWarrantDate:_this.checkWarrantDate});});};_this.checkRegoDate=function(date){var regoWarning;var regoIsDue=new Date(date);var today=new Date();var daysToRego=Math.floor((regoIsDue.getTime()-today.getTime())/(1000*3600*24));//console.log(daysToRego)\nif(daysToRego<=29&&daysToRego>14){regoWarning='text-warning';}else if(daysToRego<=14){regoWarning='text-danger';}else if(daysToRego>29){regoWarning='text-dark';}//console.log(regoWarning)\nreturn regoWarning;};_this.checkWarrantDate=function(date){var warrantWarning;var warrantIsDue=new Date(date);var today=new Date();var daysToWarrant=Math.floor((warrantIsDue.getTime()-today.getTime())/(1000*3600*24));//console.log(daysToWarrant)\nif(daysToWarrant<=29&&daysToWarrant>14){warrantWarning='text-warning';}else if(daysToWarrant<=14){warrantWarning='text-danger';}else if(daysToWarrant>29){warrantWarning='text-dark';}//console.log(warrantWarning)\nreturn warrantWarning;};_this.deleteVehicle=function(id){if(window.confirm(\"Are you sure?\")){axios.delete('http://localhost:5000/vehicles/'+id).then(function(res){return console.log(res.data);});_this.setState({vehicles:_this.state.vehicles.filter(function(el){return el._id!==id;})});}};return _this;}_createClass(VehicleList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// this method adds a list of vehicles from the server (MongoDB) to the state as array\naxios.get('http://localhost:5000/vehicles/').then(function(res){_this2.setState({vehicles:res.data});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"table-responsive\"},React.createElement(\"h3\",{style:{textAlign:'center'}},\"All Vehicles\"),React.createElement(\"table\",{className:\"table\"},React.createElement(\"thead\",{className:\"thead-light\"},React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Make\"),React.createElement(\"th\",null,\"Model\"),React.createElement(\"th\",null,\"Year\"),React.createElement(\"th\",null,\"Plate\"),React.createElement(\"th\",null,\"Staff\"),React.createElement(\"th\",null,\"Ownership\"),React.createElement(\"th\",null,\"Lease Exp\"),React.createElement(\"th\",null,\"Cost\"),React.createElement(\"th\",null,\"Rego Due\"),React.createElement(\"th\",null,\"WOF Due\"),React.createElement(\"th\",null,\"Odo Read\"),React.createElement(\"th\",null,\"Odo Date\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,this.vehicleList())));}}]);return VehicleList;}(React.Component);export{VehicleList as default};","map":{"version":3,"sources":["/Users/ivoalexandroff/Desktop/Coding/Projects/VehicleTracker/vehicle-tracker/src/components/vehicle-list.component.js"],"names":["React","Link","axios","Vehicle","props","vehicle","make","model","year","numberPlate","staff","ownedOrLeased","leaseExp","substring","split","reverse","join","cost","checkRegoDate","regoDue","checkWarrantDate","warrantDue","odometer","odometerDate","_id","deleteVehicle","VehicleList","state","vehicles","vehicleList","map","currentvehicle","date","regoWarning","regoIsDue","Date","today","daysToRego","Math","floor","getTime","warrantWarning","warrantIsDue","daysToWarrant","id","window","confirm","delete","then","res","console","log","data","setState","filter","el","get","catch","err","textAlign","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\n\n\nlet Vehicle = (props) => (\n    <tr>\n        <td>{props.vehicle.make}</td>\n        <td>{props.vehicle.model}</td>\n        <td>{props.vehicle.year}</td>\n        <td>{props.vehicle.numberPlate}</td>\n        <td>{props.vehicle.staff}</td>\n        <td>{props.vehicle.ownedOrLeased}</td>\n        <td>{props.vehicle.ownedOrLeased === 'Leased' ? props.vehicle.leaseExp.substring(0,10).split('-').reverse().join('/') : 'NA'}</td>\n        <td>${props.vehicle.cost}</td>\n        <td className={props.checkRegoDate(props.vehicle.regoDue)}>{props.vehicle.regoDue.substring(0,10).split('-').reverse().join('/')}</td>\n        <td className={props.checkWarrantDate(props.vehicle.warrantDue)}>{props.vehicle.warrantDue.substring(0,10).split('-').reverse().join('/')}</td>\n        <td>{props.vehicle.odometer}</td>\n        <td>{props.vehicle.odometerDate.substring(0,10).split('-').reverse().join('/')}</td>\n        <td>\n            <Link to={'/edit/'+props.vehicle._id}>edit</Link> | <a href='#' className='text-danger' onClick={() => {props.deleteVehicle(props.vehicle._id)}}>delete</a>\n        </td>\n    </tr>\n)\n\nexport default class VehicleList extends React.Component {\n    \n    state = {\n        vehicles: []\n    }\n    \n    componentDidMount() { // this method adds a list of vehicles from the server (MongoDB) to the state as array\n        axios.get('http://localhost:5000/vehicles/')\n        .then(res => {\n            this.setState({\n                vehicles: res.data\n            })\n        })\n        .catch(err => console.log(err))\n    }\n\n    vehicleList = () => {\n        return this.state.vehicles.map(currentvehicle => {\n            return <Vehicle vehicle={currentvehicle} deleteVehicle={this.deleteVehicle} key={currentvehicle._id} checkRegoDate={this.checkRegoDate} checkWarrantDate={this.checkWarrantDate}/>\n        })\n    }\n\n    checkRegoDate = (date) => {\n        let regoWarning\n        let regoIsDue = new Date(date)\n        let today = new Date()\n        let daysToRego = Math.floor((regoIsDue.getTime() - today.getTime()) / (1000 * 3600 * 24))\n        //console.log(daysToRego)\n        \n        if (daysToRego <= 29 && daysToRego > 14 ) {regoWarning = 'text-warning'} else if (daysToRego <= 14) { regoWarning='text-danger'} else if (daysToRego > 29) {regoWarning = 'text-dark'}\n        //console.log(regoWarning)\n        \n        return regoWarning\n    }\n\n    checkWarrantDate = (date) => {\n        let warrantWarning\n        let warrantIsDue = new Date(date)\n        let today = new Date()\n        let daysToWarrant = Math.floor((warrantIsDue.getTime() - today.getTime()) / (1000 * 3600 * 24))\n        //console.log(daysToWarrant)\n        \n        if (daysToWarrant <= 29 && daysToWarrant > 14 ) {warrantWarning = 'text-warning'} else if (daysToWarrant <= 14) { warrantWarning='text-danger'} else if (daysToWarrant > 29) {warrantWarning = 'text-dark'}\n        //console.log(warrantWarning)\n        \n        return warrantWarning\n    }\n\n    deleteVehicle = (id) => {\n        if (window.confirm(\"Are you sure?\")) {\n        axios.delete('http://localhost:5000/vehicles/'+id)\n        .then(res => console.log(res.data))\n        this.setState({\n            vehicles: this.state.vehicles.filter(el => el._id !== id)\n        })\n        }\n    }\n\n    render() {\n        return(\n            <div className='table-responsive'>\n                <h3 style={{textAlign: 'center'}}>All Vehicles</h3>\n                <table className='table'>\n                    <thead className='thead-light'>\n                        <tr>\n                            <th>Make</th>\n                            <th>Model</th>\n                            <th>Year</th>\n                            <th>Plate</th>\n                            <th>Staff</th>\n                            <th>Ownership</th>\n                            <th>Lease Exp</th>\n                            <th>Cost</th>\n                            <th>Rego Due</th>\n                            <th>WOF Due</th>\n                            <th>Odo Read</th>\n                            <th>Odo Date</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.vehicleList()}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}